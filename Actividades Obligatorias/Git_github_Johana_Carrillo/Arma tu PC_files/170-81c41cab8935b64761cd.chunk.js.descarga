(("undefined"!==typeof self?self:this).webpackJsonp=("undefined"!==typeof self?self:this).webpackJsonp||[]).push([[170],{1161:function(t,e,i){},1162:function(t,e,i){},1163:function(t,e,i){},1273:function(t,e,i){"use strict";var o=i(1161);i.n(o).a},1274:function(t,e,i){"use strict";var o=i(1162);i.n(o).a},1275:function(t,e,i){"use strict";var o=i(1163);i.n(o).a},1366:function(t,e,i){"use strict";i.r(e);var o,n,s=i(2),r=i(8),c=i(697),a=i(31),d=i(463),l=i(676),p={data:()=>({$_sectionsOrderSortMixin_initialized:!1}),updated(){this.$_sectionsOrderSortMixin_initialized?this.$_sectionsOrderSortMixin_makeSortable():this.$_sectionsOrderSortMixin_destroySortable()},beforeDestroy(){this.$_sectionsOrderSortMixin_destroySortable()},methods:{initializeSectionsOrderSort(){this.$_sectionsOrderSortMixin_initialized=!0},$_sectionsOrderSortMixin_markItemAsTransiting(t){t.addClass("noclick in-transit")},$_sectionsOrderSortMixin_unmarkItemAsTransiting(t){t.removeClass("noclick in-transit")},$_sectionsOrderSortMixin_makeSortable(){let t=Object(l.a)(this.$el);t.sortable("instance")||t.sortable({axis:"x",cursor:"move",handle:".surface-section-title-new",items:"> .surface-section.section-sortable",scrollSensitivity:48,cancel:"[contenteditable], .ui-resizable-handle, object, embed, input, button, textarea",start:(t,e)=>{null==e.item.data("section-id")&&this.update(),this.$_sectionsOrderSortMixin_markItemAsTransiting(e.item)},stop:(t,e)=>{this.$_sectionsOrderSortMixin_unmarkItemAsTransiting(e.item)},update:(t,e)=>{this.sortedSection(d.a.getNewIndex(e.item))}})},$_sectionsOrderSortMixin_destroySortable:function(){let t=Object(l.a)(this.$el).off(".sort").sortable("instance");t&&t.destroy()}}},u=i(101),h=i(329),b=i(518),g=i(58),f=i(44),S=i(525),m=function(t,e,i,o){var n,s=arguments.length,r=s<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)r=Reflect.decorate(t,e,i,o);else for(var c=t.length-1;c>=0;c--)(n=t[c])&&(r=(s<3?n(r):s>3?n(e,i,r):n(e,i))||r);return s>3&&r&&Object.defineProperty(e,i,r),r},y=function(t,e){if("object"===typeof Reflect&&"function"===typeof Reflect.metadata)return Reflect.metadata(t,e)};let O=class extends(Object(s.c)()){constructor(){super(...arguments),this.OzTextButtonColorScheme=g.a,this.maxLength=512}get tailwindFontClass(){return Object(S.a)(this.fontId)}get sectionTitle(){return this.section.title}get isBeingEdited(){return this.sectionBeingEditedId&&this.sectionBeingEditedId===this.section.id&&!this.isWallOnboardingFlow}get wallSectionsLength(){return this.sections.length}get isEmptyState(){return this.isBeingEdited&&1===this.wallSectionsLength}get titlePlaceholder(){return this.isEmptyState?this.__("Name your first section"):this.__("Name your section")}handleIsBeingEdited(t){t&&this.$nextTick(()=>{this.$refs.title.focus()})}mounted(){this.isBeingEdited&&this.$nextTick(()=>{this.$refs.title.focus()})}saveTitle(){const t=this.$refs.title.$el.value.replace(/\n|\r/g,"");if(t.length>0)this.changeSectionTitle({sectionId:this.section.id,title:t});else{const t=this.__("Section title cannot be empty.");this.setSnackbar({message:t})}}tryStartEditing(){this.canIEdit&&!this.isBeingEdited&&this.startEditingSection({sectionId:this.section.id})}deleteSection(){this.$emit("delete")}onOutsideClick(){if(!this.isBeingEdited)return;const t=this.$refs.title.$el.value.replace(/\n|\r/g,"");t.length>0?this.changeSectionTitle({sectionId:this.section.id,title:t}):this.stopEditingSection()}};m([Object(s.e)(),y("design:type","function"===typeof(o="undefined"!==typeof Section&&Section)?o:Object)],O.prototype,"section",void 0),m([Object(s.e)(),y("design:type","function"===typeof(n="undefined"!==typeof Id&&Id)?n:Object)],O.prototype,"sectionBeingEditedId",void 0),m([r.c,y("design:type",Boolean)],O.prototype,"isWallOnboardingFlow",void 0),m([r.c,y("design:type",Boolean)],O.prototype,"isIOS",void 0),m([Object(r.d)("section").Getter,y("design:type",Array)],O.prototype,"sections",void 0),m([r.b,y("design:type",Boolean)],O.prototype,"canIModerate",void 0),m([r.b,y("design:type",Boolean)],O.prototype,"canIEdit",void 0),m([r.b,y("design:type",String)],O.prototype,"colorScheme",void 0),m([r.b,y("design:type",Number)],O.prototype,"fontId",void 0),m([r.b,y("design:type",String)],O.prototype,"dir",void 0),m([r.b,y("design:type",Boolean)],O.prototype,"isUsingNewSurfaceShadows",void 0),m([Object(s.g)("isBeingEdited"),y("design:type",Function),y("design:paramtypes",[Object]),y("design:returntype",void 0)],O.prototype,"handleIsBeingEdited",null),m([Object(r.d)("section").Action,y("design:type",Function)],O.prototype,"changeSectionTitle",void 0),m([Object(r.d)("section").Action,y("design:type",Function)],O.prototype,"stopEditingSection",void 0),m([Object(r.d)("section").Action,y("design:type",Function)],O.prototype,"startEditingSection",void 0),m([Object(r.d)("section").Action,y("design:type",Function)],O.prototype,"showSectionActionMenu",void 0),m([Object(r.d)("snackbars").Action,y("design:type",Function)],O.prototype,"setSnackbar",void 0),O=m([Object(s.a)({components:{MultilineInput:h.a,OzTextButton:g.c,OzIcon:f.default},mixins:[b.a]})],O);var v=O,w=i(5),x=Object(w.a)(v,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("header",{class:["surface-section-title-new","relative","rounded-xl","text-20","break-words",{"bg-dark-ui-100 text-light-text-100":"dark"===t.colorScheme,"bg-light-ui-100 text-dark-text-100":"light"===t.colorScheme},"font-semibold","mb-4","w-[254px]",t.tailwindFontClass,t.isUsingNewSurfaceShadows&&"shadow-elevation-1"],attrs:{"data-view-mode":t.isBeingEdited?"edit":"show"},on:{dblclick:t.tryStartEditing}},[i("div",{staticClass:"ltr:pl-3 rtl:pr-3 ltr:pr-4 rtl:pl-4 py-2"},[t.isBeingEdited?t._e():i("hgroup",[i("h2",{attrs:{"data-cy":"sectionTitle"}},[t._v(t._s(t.sectionTitle))])]),t._v(" "),t.isBeingEdited?i("hgroup",[i("multiline-input",{ref:"title",class:[t.tailwindFontClass,"text-20",{"bg-dark-ui-100 text-light-text-100 placeholder-light-text-200":"dark"===t.colorScheme,"bg-light-ui-100 text-dark-text-100 placeholder-dark-text-200":"light"===t.colorScheme},,"font-semibold","m-0"],attrs:{dir:t.dir,value:t.sectionTitle,maxlength:t.maxLength,placeholder:t.titlePlaceholder,required:""},on:{enter:t.saveTitle,escape:t.stopEditingSection},nativeOn:{paste:function(t){t.stopPropagation()}}})],1):t._e()]),t._v(" "),t.isBeingEdited?i("div",{staticClass:"flex w-full justify-end h-8"},[t.isEmptyState?t._e():i("OzTextButton",{class:["font-semibold","text-14","me-4"],attrs:{"color-scheme":t.OzTextButtonColorScheme.Secondary,"dark-mode":"dark"===t.colorScheme,text:t.__("Cancel")},on:{click:t.stopEditingSection}}),t._v(" "),i("OzTextButton",{class:["font-semibold","text-14","me-4"],attrs:{"dark-mode":"dark"===t.colorScheme,text:t.__("Save")},on:{click:t.saveTitle}})],1):t._e(),t._v(" "),t.canIModerate&&!t.isBeingEdited?i("OzTextButton",{class:["absolute","leading-none","p-0","w-[32px]","h-[32px]","-end-1.25","top-[-2px]"],attrs:{"data-cy":"sectionAction","color-scheme":t.OzTextButtonColorScheme.SecondaryMuted,"dark-mode":"dark"===t.colorScheme,"aria-label":t.__("Section actions"),title:t.__("Section actions")},on:{click:function(e){return t.showSectionActionMenu({sectionId:t.section.id})}}},[i("OzIcon",{attrs:{name:"more_vertical",size:16}})],1):t._e()],1)}),[],!1,null,null,null).exports,_=i(691),j=i(34),I=i(69),P=i(330);function C(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,o)}return i}function E(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?C(Object(i),!0).forEach((function(e){k(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):C(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function k(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var $={data:()=>({$_sectionSortMixin_initialized:!1,$_sectionSortMixin_savePostHandler:null}),beforeDestroy(){this.$_sectionSortMixin_destroySortable()},methods:E(E({},Object(a.b)(["changeDragging"])),{},{initializeSectionSort(t){this.$_sectionSortMixin_makeSortable(),this.$_sectionSortMixin_savePostHandler=t,t||Object(j.c)("Using SectionSortMixin without declaring a handler function to save post."),this.$_sectionSortMixin_initialized=!0},destroySectionSort(){this.$_sectionSortMixin_destroySortable(),this.$_sectionSortMixin_savePostHandler=null,this.$_sectionSortMixin_initialized=!1},$_sectionSortMixin_clipItems(t,e,i){let o,n,s=i.height(),r=i.width();if(s>144){let t=e.offsetY+(e.originalEvent.target.getBoundingClientRect().top-i[0].getBoundingClientRect().top);if(t>144){s-t<144?(n=s-144,o=s):(n=t-72,o=n+144),i.data("clipTop",n)}else n=0,o=144;i.css("clip",`rect(${n-20}px, ${r+30}px, ${o+40}px, -20px)`)}t.addClass("ui-sortable-clipped")},$_sectionSortMixin_unclipItems(t,e,i){let o=document.getElementById("wall-container"),n=i[0].offsetTop;t.removeClass("ui-sortable-clipped");let s=null!=i.data("clipTop")?i.data("clipTop"):0,r=null!=i.data("scrollTop")?i.data("scrollTop"):0,c=i[0].offsetTop-n;o.scrollTop=r+c+s,i.removeData("clipTop"),i.removeData("scrollTop")},$_sectionSortMixin_saveScrollPosition(t,e,i){let o=document.getElementById("wall-container");i.data("scrollTop",o.scrollTop)},$_sectionSortMixin_markItemAsTransiting(t){t.addClass("noclick in-transit")},$_sectionSortMixin_unmarkItemAsTransiting(t){t.removeClass("noclick in-transit")},$_sectionSortMixin_savePost({sectionId:t,sortIndex:e,postCid:i,previousCid:o,nextCid:n}){this.$_sectionSortMixin_savePostHandler?(Object(I.a)("wishOrderArray")&&this.$_sectionSortMixin_savePostHandler({sectionId:t,postCid:i,previousCid:o,nextCid:n}),Object(I.a)("wishOrderArray")||this.$_sectionSortMixin_savePostHandler({sectionId:t,postCid:i,sortIndex:e})):Object(j.a)(new Error("No handler to save post for SectionSortMixin."))},$_sectionSortMixin_makeSortable(){let t=Object(l.a)(this.$el).find(".section-posts");t.sortable("instance")||t.sortable({connectWith:".surface-section .section-posts",cursor:"move",items:"> .wish-editable:not(#wish-new)",scrollSensitivity:48,cancel:"[contenteditable], .ui-resizable-handle, object, embed, input, button, textarea, select, option",start:(e,i)=>{Object(l.a)(this.$el).parent().addClass("ui-sortable-sorting"),t.addClass("ui-sortable-sorting"),this.$_sectionSortMixin_clipItems(t,e,i.item),t.sortable("refreshPositions"),this.$_sectionSortMixin_markItemAsTransiting(i.item),this.changeDragging({isAPostDragging:!0})},beforeStop:(e,i)=>{this.$_sectionSortMixin_saveScrollPosition(t,e,i.item)},stop:(e,i)=>{Object(l.a)(this.$el).parent().removeClass("ui-sortable-sorting"),t.removeClass("ui-sortable-sorting"),"stream"!==this.$_sectionSortMixin_format&&"shelf"!==this.$_sectionSortMixin_format||this.$_sectionSortMixin_unclipItems(t,e,i.item),this.$_sectionSortMixin_unmarkItemAsTransiting(i.item),this.changeDragging({isAPostDragging:!1})},over:(t,e)=>{e.item.data("newSectionId",this.currentSectionId)},change:(t,e)=>{e.item.removeData("prevWishId nextWishId previousCid nextCid");let i=e.placeholder;e.item.data({prevWishId:i.prev(".wish").attr("id"),nextWishId:i.next(".wish").attr("id"),previousCid:i.next(".wish").data("postCid"),nextCid:i.prev(".wish").data("postCid")})},remove:(e,i)=>{i.placeholder.remove(),t.sortable("cancel")},update:(t,e)=>{var i;e.item.data("newSectionId")===this.currentSectionId&&((i={}).sectionId=this.currentSectionId,i.prevId=e.item.data("prevWishId"),i.nextId=e.item.data("nextWishId"),i.prevId||(i.prevId=null),i.nextId||(i.nextId=null),Object(I.a)("wishOrderArray")&&this.$_sectionSortMixin_savePost({sectionId:this.currentSectionId,postCid:e.item.data("postCid"),previousCid:e.item.data("previousCid"),nextCid:e.item.data("nextCid")}),Object(I.a)("wishOrderArray")||Object(P.a)(e.item,i),e.item.removeData("newSectionId prevWishId nextWishId previousCid nextCid"))}})},$_sectionSortMixin_destroySortable(){let t=Object(l.a)(this.$el).off(".sort").sortable("instance");t&&t.destroy()}})},T=i(492);function B(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,o)}return i}function A(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?B(Object(i),!0).forEach((function(e){M(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):B(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function M(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var D={components:{BaseIcon:u.a,SurfacePost:_.a,SurfaceSectionTitleNew:x},mixins:[$],props:{section:{type:Object,default:()=>({})}},computed:A(A(A(A(A(A(A(A({},Object(a.e)(["inlinePostEdit","isFirefox","isSafari"])),Object(a.c)("post",["postBeingEditedCid","postEntitiesByCid","postCidsBySection","postOrder"])),Object(a.e)("section",["sectionEntities","sectionBeingEditedId"])),Object(a.c)("section",{wallSections:"sections"})),Object(a.c)({colorScheme:"colorScheme",backgroundLuminance:"backgroundLuminance",canReorder:"canIModerate"})),Object(a.c)(["canIModerate","newPostLocation","isPostable","isUsingNewSurfaceShadows"])),Object(a.c)("nativeApp",["shelfSectionBottomPaddingPx"])),{},{sectionDomId(){return Object(T.b)(this.currentSectionId)},wallSectionsLength(){return this.wallSections.length},currentSectionId(){return 0===this.wallSectionsLength?this.sectionBeingEditedId:this.section.id},currentSection(){return this.sectionEntities[this.currentSectionId]},sortIndex(){return this.currentSection.sort_index},sectionColor(){return this.currentSection.color},postCidsInCurrentSection(){return this.postCidsBySection[this.currentSectionId]||[]},sortedSectionPosts(){const t=this.postCidsInCurrentSection.map(t=>this.postEntitiesByCid[t]);if(Object(I.a)("wishOrderArray")&&(!this.postOrder||0===this.postOrder.length))return[];if(!this.inlinePostEdit){const e=t.filter(t=>t.id||!!t.body||!!t.subject||!!t.attachment);return Object(I.a)("wishOrderArray")?Object(P.g)(e,this.postOrder):Object(P.h)(e)}return Object(I.a)("wishOrderArray")||Object(I.a)("wishOrderArray")||Object(I.a)("wishOrderArray")||Object(I.a)("wishOrderArray")||Object(I.a)("wishOrderArray")||Object(I.a)("wishOrderArray")?Object(P.g)(t,this.postOrder):Object(P.h)(t)},canAddPost(){return this.isPostable&&(!this.sectionBeingEditedId||this.section.id!==this.sectionBeingEditedId)},shouldShowButtonAtTop(){return this.canAddPost&&"top"===this.newPostLocation},shouldShowButtonAtBottom(){return this.canAddPost&&"bottom"===this.newPostLocation}}),mounted(){this.isPostable&&(Object(I.a)("wishOrderArray")&&this.initializeSectionSort(({postCid:t,sectionId:e,previousCid:i,nextCid:o})=>{this.sortedPost({postCid:t,sectionId:e,previousCid:i,nextCid:o})}),Object(I.a)("wishOrderArray")||this.initializeSectionSort(({postCid:t,sortIndex:e,sectionId:i})=>{this.sortedPost({postCid:t,sortIndex:e,sectionId:i})}))},methods:A(A(A({},Object(a.b)("post",["sortedPost"])),Object(a.b)("section",["deleteSection"])),{},{confirmDeleteSection(){window.confirm(this.__("Are you sure you want to delete this section and all its posts? This cannot be undone!"))&&this.deleteSection({sectionId:this.currentSectionId})},startNewPost(){this.$store.dispatch("post/startNewPost",{attributes:{wall_section_id:this.section.id}})}})};i(1273);function N(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,o)}return i}function L(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?N(Object(i),!0).forEach((function(e){H(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):N(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function H(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var z={components:{SurfaceSection:Object(w.a)(D,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("section",{class:["surface-section",{"section-sortable":t.canReorder}],style:{paddingBottom:t.shelfSectionBottomPaddingPx+"px"},attrs:{id:t.sectionDomId,"data-rank":t.sortIndex,"data-section-id":t.currentSectionId,"data-color":t.sectionColor}},[i("SurfaceSectionTitleNew",{attrs:{section:t.currentSection,"section-being-edited-id":t.sectionBeingEditedId},on:{delete:t.confirmDeleteSection}}),t._v(" "),t.shouldShowButtonAtTop?i("button",{class:{"w-[254px]":!0,"flex-shrink-0 w-full border-none rounded-xl mb-4 h-8 transition":!0,"bg-common-ui-d70 text-light-text-200 hover:bg-dark-ui-200 ":"dark"===t.colorScheme,"bg-common-ui-l80 text-dark-text-200 hover:bg-light-ui-200 ":"light"===t.colorScheme,"shadow-elevation-1":t.isUsingNewSurfaceShadows},attrs:{title:t.__("Add post to this section"),"aria-label":t.__("Add post to this section")},on:{click:function(e){return e.preventDefault(),t.startNewPost(e)}}},[i("base-icon",{staticClass:"add-icon",attrs:{name:"add"}})],1):t._e(),t._v(" "),i("div",{ref:"postsList",class:["section-posts","pb-px -mb-px",t.isFirefox||t.isSafari?"pe-4.25 ps-1 -ms-1":"me-4 ps-1 -ms-1 pe-px",{"scrollbar-photo":"light"===t.backgroundLuminance},{"scrollbar-photo-dark":"dark"===t.backgroundLuminance}],attrs:{"data-section-id":t.currentSectionId}},t._l(t.sortedSectionPosts,(function(e,o){return i("surface-post",{key:e.cid,attrs:{index:o,post:e,edit:t.inlinePostEdit,"is-last":o===t.sortedSectionPosts.length-1}})})),1),t._v(" "),t.shouldShowButtonAtBottom?i("div",{staticClass:"add-post w-[254px]",attrs:{title:t.__("Add post to this section"),"aria-label":t.__("Add post to this section")},on:{click:function(e){return e.preventDefault(),t.startNewPost(e)}}},[i("button",{class:[{"flex-shrink-0 border-none rounded-full w-8 h-8 transition":!0,"bg-common-ui-d70 text-light-text-200 hover:bg-dark-ui-100 ":"dark"===t.colorScheme,"bg-common-ui-l80 text-dark-text-200 hover:bg-light-ui-100 ":"light"===t.colorScheme},t.isUsingNewSurfaceShadows&&"shadow-elevation-1"]},[i("base-icon",{staticClass:"add-icon",attrs:{name:"add"}})],1)]):t._e()],1)}),[],!1,null,null,null).exports},mixins:[p],computed:L(L(L(L(L(L({},Object(a.e)(["wall","isIOS"])),Object(a.e)("section",["sectionsFetched","sectionBeingEditedId"])),Object(a.c)("section",["sortedSections"])),Object(a.c)(["canIModerate","isAPanelVisible","dir"])),Object(a.c)("browser",["windowHeight"])),{},{isEmptyState(){return 0===this.sortedSections.length||1===this.sortedSections.length&&!!this.sectionBeingEditedId&&this.sectionBeingEditedId===this.sortedSections[0].id},canAddSection(){return this.canIModerate&&!this.isEmptyState},isNewSectionBeingAdded(){return String(this.sectionBeingEditedId).startsWith("new_")}}),watch:{isAPanelVisible:"addSectionIfNone",windowHeight:"setMaxHeight"},beforeMount(){this.addSectionIfNone()},mounted(){this.initializeSectionsOrderSort(),this.setMaxHeight()},updated(){this.addSectionIfNone()},methods:L(L({},Object(a.b)("section",["sortedSection","startNewSection","startWithNoSections"])),{},{addSectionIfNone(){0===this.sortedSections.length&&this.sectionsFetched&&!this.isAPanelVisible&&this.startWithNoSections()},newSection:()=>({sort_index:d.a.getBottomSortIndex()}),addSection(){this.startNewSection({section:this.newSection()})},setMaxHeight(){if(this.isIOS&&navigator.userAgent.toLowerCase().includes("14_4")){const t=document.getElementById("wish-list").offsetHeight;this.$el.style=`max-height: ${t}px;`}}})},F=(i(1274),Object(w.a)(z,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"surface-sections",attrs:{dir:t.dir}},[t._l(t.sortedSections,(function(t){return i("surface-section",{key:t.id,attrs:{id:"section-"+t.id,section:t}})})),t._v(" "),i("div",{staticClass:"add-section-frame"},[t.canAddSection&&!t.isNewSectionBeingAdded?i("button",{staticClass:"flat-button muted-button add-section",on:{click:t.addSection}},[t._v("\n      "+t._s(t.__("Add section"))+"\n    ")]):t._e()])],2)}),[],!1,null,null,null).exports),R=i(696),W=i(265),G=i(219),U=i(3),V=i(679),J=i(94),q=function(t,e,i,o){var n,s=arguments.length,r=s<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)r=Reflect.decorate(t,e,i,o);else for(var c=t.length-1;c>=0;c--)(n=t[c])&&(r=(s<3?n(r):s>3?n(e,i,r):n(e,i))||r);return s>3&&r&&Object.defineProperty(e,i,r),r},Y=function(t,e){if("object"===typeof Reflect&&"function"===typeof Reflect.metadata)return Reflect.metadata(t,e)};const K=Object(r.d)("post"),Q=Object(r.d)("section"),X=Object(r.d)("composerModal"),Z=Object(r.d)("draft"),tt=Object(r.d)("postAction"),et=Object(r.d)("attachment");let it=class extends s.f{mounted(){if(this.$nextTick(()=>this.toggleNewPostHandlers(this.isPostable)),!this.$refs.surfaceHeader)return;const t=()=>{this.$refs.surfaceHeader.collapse(),document.removeEventListener("scroll",t,!0)};document.addEventListener("scroll",t,!0)}beforeDestroy(){this.disableNewPostHandlers()}enableNewPostHandlers(){U.a.addEventListener("paste",this.handleOnPaste),this.enableDropToPost(this.$el)}disableNewPostHandlers(){U.a.removeEventListener("paste",this.handleOnPaste),this.disableDropToPost(this.$el)}handleOnPaste(t){var e,i,o,n;if(t.stopPropagation(),!this.isPostable)return;if(Object(J.c)(t))return;const s=Object(W.d)(t.clipboardData);if(!s||!s.length)return;const r=(null===(i=null===(e=t.clipboardData)||void 0===e?void 0:e.types)||void 0===i?void 0:i.includes("text/rtf"))&&(null===(n=null===(o=t.clipboardData)||void 0===o?void 0:o.types)||void 0===n?void 0:n.includes("Files")),c=Object(W.e)(s,W.a.File);if(c&&!r)return this.startNewDraft({attributes:c.postAttributes,shouldStartEditing:!0}),this.dockComposerModal(),void Object(G.a)("Posts","add","Paste "+c.pasteType);const a=s.filter(t=>(null===t||void 0===t?void 0:t.pasteType)!==W.a.File);this.startNewDraft({attributes:a[0].postAttributes,shouldStartEditing:!0}),this.dockComposerModal(),Object(G.a)("Posts","add","Paste "+a[0].pasteType)}toggleNewPostHandlers(t){t?this.enableNewPostHandlers():this.disableNewPostHandlers()}scrollWallToSection(t){const e=this.postEntitiesByCid[t].wall_section_id;Object(T.a)(e)}scrollDownToPostAfterCopyOrTransfer(){var t;if(null===this.copyOrTransferPostResult&&"bottom"===this.newPostLocation&&this.copyOrTransferSectionId){const e="section-".concat(this.copyOrTransferSectionId.toString()),i=null===(t=document.getElementById(e))||void 0===t?void 0:t.getElementsByClassName("section-posts")[0];Object(V.b)(i)}}scrollDownToNewPost(){var t;if("bottom"===this.newPostLocation&&this.mostRecentlyTouchedSectionId){const e="section-".concat(this.mostRecentlyTouchedSectionId.toString()),i=null===(t=document.getElementById(e))||void 0===t?void 0:t.getElementsByClassName("section-posts")[0];Object(V.b)(i)}}scrollDownAfterPreviewImageLoaded(){var t;const e=this.mostRecentlyTouchedSectionId||this.copyOrTransferSectionId;if(e&&this.newestPost&&e==this.newestPost.wall_section_id&&"bottom"===this.newPostLocation){const i="section-".concat(e.toString()),o=null===(t=document.getElementById(i))||void 0===t?void 0:t.getElementsByClassName("section-posts")[0];Object(V.b)(o)}}};q([r.c,Y("design:type",Object)],it.prototype,"xHeader",void 0),q([r.b,Y("design:type",Object)],it.prototype,"newPostLocation",void 0),q([K.Getter,Y("design:type",Object)],it.prototype,"newestPostCid",void 0),q([K.Getter,Y("design:type",Object)],it.prototype,"postEntitiesByCid",void 0),q([K.Getter,Y("design:type",Object)],it.prototype,"newestPost",void 0),q([K.Getter,Y("design:type",Object)],it.prototype,"mostRecentlyTouchedSectionId",void 0),q([tt.Getter,Y("design:type",Object)],it.prototype,"copyOrTransferSectionId",void 0),q([tt.Getter,Y("design:type",Object)],it.prototype,"copyOrTransferPostResult",void 0),q([et.Getter,Y("design:type",Object)],it.prototype,"surfacePreviewImageLoaded",void 0),q([K.Action,Y("design:type",Object)],it.prototype,"createPost",void 0),q([Q.Action,Y("design:type",Object)],it.prototype,"startEditingSection",void 0),q([Q.Action,Y("design:type",Object)],it.prototype,"deleteSection",void 0),q([r.b,Y("design:type",Object)],it.prototype,"isPostable",void 0),q([r.b,Y("design:type",String)],it.prototype,"dir",void 0),q([r.b,Y("design:type",String)],it.prototype,"backgroundLuminance",void 0),q([Z.Action,Y("design:type",Function)],it.prototype,"startNewDraft",void 0),q([X.Action("dock"),Y("design:type",Function)],it.prototype,"dockComposerModal",void 0),q([Object(s.g)("isPostable"),Y("design:type",Function),Y("design:paramtypes",[Object]),Y("design:returntype",void 0)],it.prototype,"toggleNewPostHandlers",null),q([Object(s.g)("newestPostCid"),Y("design:type",Function),Y("design:paramtypes",[Object]),Y("design:returntype",void 0)],it.prototype,"scrollWallToSection",null),q([Object(s.g)("copyOrTransferPostResult"),Y("design:type",Function),Y("design:paramtypes",[]),Y("design:returntype",void 0)],it.prototype,"scrollDownToPostAfterCopyOrTransfer",null),q([Object(s.g)("newestPost"),Y("design:type",Function),Y("design:paramtypes",[]),Y("design:returntype",void 0)],it.prototype,"scrollDownToNewPost",null),q([Object(s.g)("surfacePreviewImageLoaded"),Y("design:type",Function),Y("design:paramtypes",[]),Y("design:returntype",void 0)],it.prototype,"scrollDownAfterPreviewImageLoaded",null),it=q([Object(s.a)({components:{SurfaceHeader:c.a,SurfaceSections:F},mixins:[R.a]})],it);var ot=it,nt=(i(1275),Object(w.a)(ot,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"wall-container"}},[t.xHeader?i("SurfaceHeader",{ref:"surfaceHeader"}):t._e(),t._v(" "),i("div",{ref:"wishList",class:["wish-list","overflow-y-hidden","background-luminance-"+t.backgroundLuminance,{"scrollbar-photo":"light"===t.backgroundLuminance,"scrollbar-photo-dark":"dark"===t.backgroundLuminance}],attrs:{id:"wish-list",dir:t.dir}},[i("surface-sections")],1),t._v(" "),i("div",{staticClass:"wish-sizer"}),t._v(" "),i("div",{staticClass:"gutter-sizer"})],1)}),[],!1,null,null,null));e.default=nt.exports}}]);
//# sourceMappingURL=170-81c41cab8935b64761cd.chunk.js.map